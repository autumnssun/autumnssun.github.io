"use strict";angular.module("govhack2015App",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngDialog","angular-svg-round-progress"]).config(["$routeProvider","$httpProvider",function(a,b){b.defaults.useXDomain=!0,delete b.defaults.headers.common["X-Requested-With"],a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("govhack2015App").controller("MainCtrl",["$scope","$http","ngDialog",function(a,b,c){function d(b){switch(a.animalCreated=0,console.log(angular.element.find("#machine1")),this.element[0].id){case"machine1":a.machine.result.r1=b;break;case"machine2":a.machine.result.r2=b;break;case"machine3":a.machine.result.r3=b,a.scrolling=!1,a.machine.result.r1===a.machine.result.r2&&a.machine.result.r3===a.machine.result.r2&&a.machine.result.r3===a.machine.result.r1&&(a.animalCreated=a.game.animals[b].goal/g,a.game.animals[b].count+=a.game.animals[b].goal/g,a.machine.modules[0].flashing=!0,a.machine.modules[2].flashing=!0,a.machine.modules[1].flashing=!0,a.game.animals[b].flashing=!0,a.$apply(),a.winingAnimal=a.machine.result.r1),a.machine.result.r1===a.machine.result.r2&&(a.animalCreated=a.game.animals[b].goal/g,a.game.animals[b].count+=a.game.animals[b].goal/g,a.machine.modules[0].flashing=!0,a.machine.modules[1].flashing=!0,a.game.animals[b].flashing=!0,a.$apply(),a.winingAnimal=a.machine.result.r1),a.machine.result.r3===a.machine.result.r2&&(a.game.animals[b].count+=a.game.animals[b].goal/g,a.machine.modules[1].flashing=!0,a.machine.modules[2].flashing=!0,a.game.animals[b].flashing=!0,a.winingAnimal=a.machine.result.r2,a.$apply(),a.animalCreated=a.game.animals[b].goal/g),a.machine.result.r1===a.machine.result.r3&&(a.game.animals[b].count+=a.game.animals[b].goal/g,a.machine.modules[0].flashing=!0,a.machine.modules[2].flashing=!0,a.game.animals[b].flashing=!0,a.winingAnimal=a.machine.result.r1,a.animalCreated=a.game.animals[b].goal/g);for(var d=0;d<a.game.animals.length;d++){var h=a.game.animals[d];if(h.count>=h.goal){var i=a.recipes[f(0,5)];console.log(i.repName),console.log(h.name);var j=e(i.repName,a.keyWords,h.name);console.log(j),c.open({template:'<div class="popup"><h2> Great!</h2> <h3> You have sucessfully repopulate '+h.name+'!!!</h3><img class="img-responsive" src="'+h.img+'"><p>In fact: they are raising to fast, and we need to EAT them <p><h3>Here is a recipes:<span><h4 style="color:#FF5C10">'+j+'</h4><span></h3><h4 style="color:#2D8EFF">Ingredients:</h4>'+i.ingredients+"<h4>Method:</h4>"+i.methods+"</div>",plain:!0,closeByEscape:!0})}}a.$apply()}}function e(a,b,c){for(var d=a,e=0;e<b.length;e++)d=d.replace(b[e],c);return d}function f(a,b){return Math.floor(Math.random()*b+a)}var g=4;a.game={animals:[]},a.recipes=[],a.machine={modules:[{col:"1",flash:"faa-flash animated faa-fast",flashing:!1},{col:"2",flash:"faa-flash animated faa-fast",flashing:!1},{col:"3",flash:"faa-flash animated faa-fast",flashing:!1}],result:{r1:0,r2:0,r3:0}},a.replaceArray=function(a,b,c){for(var d=a,e=0;e<b.length;e++)d=d.replace(b[e],c[e]);return d},a.keyWords=["salmon","chiken","beef","veal","quail","prawn","feta","chocolate","pork","rice","Salmon","Chiken","Beef","Veal","Quail","Prawn","Feta","Chocolate","Pork","Rice"],a.progress=function(a,b){return a/b},a.startRolling=function(){a.machine.modules[0].flashing=!1,a.machine.modules[2].flashing=!1,a.machine.modules[1].flashing=!1,a.game.animals[1].flashing=!1,a.game.animals[2].flashing=!1,a.game.animals[0].flashing=!1,a.scrolling=!1;var b=$("#machine1").slotMachine({active:0,delay:500}),c=$("#machine2").slotMachine({active:0,delay:500}),e=$("#machine3").slotMachine({active:0,delay:500});setTimeout(function(){b.shuffle(5,d)},200),setTimeout(function(){c.shuffle(5,d)},100),setTimeout(function(){e.shuffle(5,d)},500)},b.get("scripts/goodData.json").success(function(b){console.log(b),a.game.animals.push(b[f(0,40)]),a.game.animals.push(b[f(41,90)]),a.game.animals.push(b[f(91,130)]);for(var c=0;3>c;c++)a.game.animals[c].goal=parseInt(a.game.animals[c].goal),a.game.animals[c].count=parseInt(a.game.animals[c].count)}),b.get("https://www.kimonolabs.com/api/2a22ctfi?apikey=gNzoWPpwzxXB8KK1Z7uhKdAsnnij8t88").success(function(b){for(var c in b.results.collection1){a.recipes.push(b.results.collection1[c]),a.recipes[c].ingredients=[];for(var d in b.results.collection2)b.results.collection1[c].url===b.results.collection2[d].url&&a.recipes[c].ingredients.push(b.results.collection2[d].ingredients);a.recipes[c].methods=[];for(var e in b.results.collection3)b.results.collection1[c].url===b.results.collection3[e].url&&a.recipes[c].methods.push(b.results.collection3[e].Methods)}})}]);